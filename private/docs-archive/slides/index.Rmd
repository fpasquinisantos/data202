---
title: "DATA 202 Slides"
output:
  prettydoc::html_pretty:
    theme: architect
---

```{r setup, include=FALSE}
library(tidyverse)
library(glue)
```

```{r echo=FALSE, results='asis'}
add_prefix <- function(s, prefix) {
  str_replace_all(s, regex("^", multiline = TRUE), prefix)
}

tibble(filename = Sys.glob("w??/*.html")) %>% 
  separate(filename, into = c("week", "name"), sep = "/", remove = FALSE) %>% 
  mutate(rmd = str_replace(filename, ".html", ".Rmd")) %>% 
  rowwise() %>% 
  mutate(title = rmarkdown::yaml_front_matter(rmd)$title) %>% 
  mutate(title = str_replace(title, "<br>.*", "")) %>% 
  mutate(md = glue("  * [{str_trim(title)}]({filename})")) %>% 
  mutate(week = parse_number(week)) %>% 
  group_by(week) %>% 
  summarize(md = paste0(md, collapse = "\n")) %>% 
  mutate(md = glue("* Week {week}\n{md}")) %>% 
  pull(md) %>% 
  paste0(collapse = "\n") %>% 
  cat()
```
