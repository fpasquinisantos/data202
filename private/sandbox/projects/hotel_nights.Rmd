---
title: "Untitled"
author: "Ken Arnold"
date: "12/6/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidymodels)
library(readr)

hotels <- 
  read_csv('https://tidymodels.org/start/case-study/hotels.csv') %>%
  mutate(across(where(is.character), as.factor))
```

```{r}
hotels %>% 
  count(arrival_date) %>%
  ggplot(aes(x=arrival_date, y = n)) + geom_line()
```

```{r}
hotels$arrival_date[[1]] + 4
```

```{r}
stay_nights <- hotels %>%
  mutate(total_nights = stays_in_week_nights + stays_in_weekend_nights) %>% 
  mutate(booking_id = row_number()) %>% 
  uncount(total_nights) %>% 
  group_by(booking_id) %>% 
  mutate(day_to_add = row_number() - 1) %>% 
  mutate(stay_date = arrival_date + day_to_add) %>% 
  ungroup()
```


```{r}
stay_nights %>% count(stay_date) %>% 
  ggplot(aes(x=stay_date, y=n)) + geom_line()
```

