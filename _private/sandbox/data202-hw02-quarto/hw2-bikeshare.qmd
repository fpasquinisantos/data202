---
title: "Untitled"
format: html
editor: visual
---

Our goal continues to be to understand ridership patterns to evaluate the current system and suggest potential improvements. Towards that end, we will construct some more visualizations, this time using more fine-grained ridership data.

```{python}
import pandas as pd
import altair as alt
```

## The Dataset

As with HW 1, this dataset is based on data from [Capital Bikeshare](https://capitalbikeshare.com/) in Washington DC, but this version of the dataset includes more variables.

```{python}
daily_rides = pd.read_csv("data/bikeshare-day.csv")
daily_rides['date'] = pd.to_datetime(daily_rides['date'])
daily_rides
```

## Exercises

1.  Day of Week

```{python}
daily_rides['day_of_week'] = pd.Categorical.from_codes(
  daily_rides['day_of_week'],
  categories=["Sun", "Mon", "Tue", "Wed", "Thur", "Fri", "Sat"])
daily_rides
```

2.  First row

The first row says that on Saturday, January 1, 2011, a non-holiday Saturday (weekend) there were 331 rides by casual rides.

3.  Rides by Data and Rider Type

```{python}
chart = alt.Chart(daily_rides)
circles = chart.mark_circle().encode(
  x="date", y="rides",
  color="rider_type",
  tooltip=["date", "rides", "rider_type"]).interactive()
circles + circles.transform_loess('date', 'rides', groupby=['rider_type']).mark_line()
```
```{python}
"""
/*daily_rides %>%
  ggplot() +
  aes(
    x = date, 
    y = rides, 
    color = rider_type
    ) +
  geom_point(alpha = 0.5, size = 1) +
  geom_smooth(
    method = "loess", 
    formula = y ~ x
    ) +
  labs(
    x = "Date", 
    y = "Number of rides", 
    color = "Type of Rider", 
    title = "Rides by date", 
    subtitle = "for casual and registered riders"
    )*/
    """
```
