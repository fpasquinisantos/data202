---
title: "HW 1: Warmup"
output: 
  tufte::tufte_html:
    css: ../hw.css
    tufte_variant: "envisioned"
    highlight: pygments
link-citations: yes
---

```{r setup, include=FALSE}
library(tidyverse)
library(ggformula)
```

## Learning Goals

When you've finished this exercise, you'll have some basic experience with RStudio, data frames, and the Grammar of Graphics.

## Getting Help

If you have any questions about the assignment, please post them on Piazza!

## Getting started

Instead of a new repo for each assignment, we'll be using a **portfolio repo** for this and most future assignments.

- Find your **portfolio repo** in our [GitHub org](https://github.com/Calvin-DS202-21FA).
- Clone it as a new project (see [Exercise 1](../../ex/ex01/ex01-github.html) starting at "New Project" for a reminder of the steps; thankfully you *don't* need to do the SSH key setup again!)
- Find `ex/ex01/ex01.Rmd` in the Files pane  and Knit it. Make sure it knits without errors. Update it to match what you did in Exercise 1. (This is just to jog your memory.)

`r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` *Now is a good time to commit and push your changes to GitHub with an appropriate commit message. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards.*

- Find `hw/hw01-warmup/hw01-warmup.Rmd` in the Files pane. Change the title to "Homework 1: Warmup" and change the author name to your name.

`r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` Knit, Commit, and Push again. Ensure your Git pane is clean.


The document contains placeholders for the following exercises.

```{r wrangle, include=FALSE}
# This simplifies the given day data.
daily_rides <- read_csv(here::here("docs/data/bikeshare/day.csv")) %>%
  mutate(workingday = as.factor(case_when(
    workingday == 1 ~ "workday",
    TRUE            ~ "weekend"))) %>% 
  select(
    date = dteday,
    day_of_week = weekday,
    workingday,
    #unregistered_rides = casual,
    #registered_rides = registered,
    total_rides = registered
  )
write_csv(daily_rides, here::here("docs/data/bikeshare/day_simple.csv"))
write_csv(daily_rides, here::here("src/hw/hw01-warmup/data/day_simple.csv"))
daily_rides %>% glimpse()
```

# The Data

Let's imagine we're hired by the administrators of the [Capital Bikeshare program](https://www.capitalbikeshare.com) program in Washington D.C., to **help them understand and predict the hourly demand for rental bikes**. We will be working with this data in several activities throughout this semester.

This understanding will help them plan the number of bikes that need to be available at different parts of the system at different times, to avoid the case where someone wants a bike but the station is empty, or someone wants to return a bike but the station is full.

The data for this problem were collected from the Capital Bikeshare program over the course of two years (2011 and 2012). Researchers at the University of Porto processed the data and augmented it with extra information, as described [on this page](https://archive.ics.uci.edu/ml/datasets/bike+sharing+dataset). It has been cleaned up slightly for this assignment.


## Load and Explore Data

The data is in a CSV (comma separated values) file called `day.csv` in the `data/` folder in your repository. You can load this file into R using the `read_csv()` function. The following code block is already included.

```{r load-data, eval=FALSE, message=FALSE}
daily_rides <- read_csv("data/day_simple.csv")
```

Practice reading that out loud: "`daily_rides` gets `read_csv` of `data/day_simple.csv`." (That's a *forward* slash.)

The variables and their descriptions are given below:

```{marginfigure}
Note: the original dataset also includes rides by users who didn't register for a Capital Bikeshare account. That data has been removed for this first assignment to keep things simple.
```

* `date`
* `day_of_week`: an integer between 0 and 6 inclusive. In a later exercise, you will decode which number represents Monday, etc.
* `workingday`: either "weekday" or "weekend" (which actually includes holidays too).
* `total_rides`: the number of rides that day by users who registered for a Capital Bikeshare account

::: {.exercises}

1. Write a sentence in Markdown answering the following two questions: How many rows does the dataset contain? What does each row represent?

`r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` Knit, Commit, and Push again. Ensure your Git pane is clean.

2. Create a scatter plot showing the *total number of rides* each day. Sample code is provided below, but you will need to fill in the blanks.

```{r eval=FALSE}
ggplot(data = ____, mapping = aes(x = ___, y = ___)) +
  geom_point() +
  geom_smooth() +
  labs(x = "___", y = "___")
```

Let's deconstruct this code: 

- `ggplot()` is the function we are using to build our plot, in layers.
- In the first layer we always specify the data frame as the first argument. Then, we define the mappings between the variables in the dataset and the **aes**thetics of the plot (e.g. x and y coordinates, colors, etc.). 
- In the next layer we represent the data with **geom**etric shapes, in this case with points.
- In the next layer we add a smoothing "trend" line. (Try removing `geom_point()` and `geom_smooth()` one at a time to make sure you understand what each one does.)
- Finally, we make the visualization more hospitable by adding labels for each aesthetic of the plot.

The result should look like:

```{r registered-by-day, echo=FALSE, message=FALSE}
daily_rides %>% 
  ggplot(aes(x = date, y = total_rides)) +
    geom_point() +
    geom_smooth() +
    labs(x = "date", y = "number of rides")
```


`r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` *Commit and push your changes again.*

4. Add a new code chunk that creates the same plot again, but add a mapping of `workingday` to the `color` aesthetic. Your result should look like:

```{marginfigure}
You might start by coping and pasting from your previous code chunk, but be sure to give the new code chunk an appropriate name.
```


```{r registered-by-day-workingday, echo=FALSE, message=FALSE}
daily_rides %>% 
  ggplot(aes(x = date, y = total_rides, color = workingday)) +
    geom_point() +
    geom_smooth() +
    labs(x = "date", y = "number of rides", color = "working day?")
```

5. Write a one or two sentence interpretation of the graph, focusing on the following question: *How do the number of rides compare for weekdays vs weekends?* Based on this, make a guess about what Capital Bikeshare riders use the bikes for.

`r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` *Commit and push your changes again.* Make sure that your "git" pane is clean.

:::

Finally, return to the Moodle quiz to answer the questions there.
