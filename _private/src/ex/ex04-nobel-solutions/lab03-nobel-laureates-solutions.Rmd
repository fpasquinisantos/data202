---
title: "Lab 03 - Nobel laureates"
author: "YOUR NAME"
date: "TODAY'S DATE"
output: github_document
---

### Load packages and data

```{r load-packages, message=FALSE}
library(tidyverse)
```

```{r load-data, message=FALSE}
nobel <- read_csv("data/nobel.csv")
```

### Exercise 1

There are `r nrow(nobel)` Nobel laureates in the dataset. For each laureate the dataset
provides `r ncol(nobel)` variables.


### Exercise 2

```{r nobel-living}
nobel_living <- nobel %>%
  filter(!is.na(country),
         gender != "org",
         is.na(died_date))
```

We have data for `r nrow(nobel_living)` living Nobel laureates.

```{r}
nobel_living_science <- nobel_living %>%
  mutate(
    country_us = if_else(country == "USA", "USA", "Other"),
    born_country_us = if_else(born_country == "USA", "USA", "Other")
  ) %>% 
  filter(category %in% c("Physics", "Medicine", "Chemistry", "Economics"))
```


### Exercise 3

```{r country-living}
ggplot(nobel_living_science, aes(y = country_us)) +
  geom_bar() +
  facet_wrap(~ category) +
  labs(x = "Number of Nobel laureates", y = "Country they lived in when winning")
```

Across all four STEM categories, there were more laureates who were living in
the US than in any other country at the time the prize was awarded.

### Exercise 4

*don't add code here; instead, go back and edit the pipeline in Exercise 2*

### Exercise 5

```{r country-living-and-born}
ggplot(nobel_living_science, aes(y = country_us, fill = born_country_us)) +
  geom_bar(position = position_dodge(preserve = "single")) +
  facet_wrap(~ category) +
  labs(x = "Number of Nobel laureates", y = "Country they lived in when winning")
```


### Exercise 6

```{r other-countries}
nobel_living_science %>% 
  filter(country == "USA" & born_country_us != "USA") %>% 
  count(born_country) %>% 
  arrange(desc(n))
```
