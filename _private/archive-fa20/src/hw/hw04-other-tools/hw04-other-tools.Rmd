---
title: "Homework 4: Other tools"
author: "YOUR NAME HERE"
date: "TODAY'S DATE HERE"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Setup

We're using two new packages:

* `plotly` is the R interface to the [Plotly graphing library](https://plotly.com/r/)
* [`reticulate`](https://rstudio.github.io/reticulate/) allows us to run Python code from within R.

```{r packages, message=FALSE}
library(tidyverse)
library(ggplot2)
library(plotly)
library(reticulate)
# This is needed to avoid a crash on the RStudio server
# https://github.com/rstudio/reticulate/issues/849
py_run_string("import matplotlib.pyplot as plt; plt.switch_backend('agg')")
```

This chunk is just a quick demo of running Python code and showing the result.

```{python demo-pi}
# https://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula
import math
sum(16 ** -k * (4/(8*k+1) - 2/(8*k+4) - 1/(8*k+5) - 1/(8*k+6)) for k in range(100)) - math.pi
```

Import the Python packages that we'll need:

```{python py-imports}
import matplotlib.pyplot as plt
import seaborn as sns
```


## Read Data

```{r read-data, message=FALSE}
daily_rides <- read_csv("data/day.csv")
```

## Exercise 1: Plotly

First, using `ggplotly`:

```{r riding-with-ggplotly, fig.width=7}
p <- ggplot(daily_rides, aes(x = date, y = total)) +
  geom_line()
ggplotly(p)
```

Then, using `plot_ly`:

```{r riding-with-plot_ly}
daily_rides %>% 
  plot_ly(x = ~date, y = ~total) %>% 
  add_markers() %>% 
  layout(title = "YOUR TITLE HERE")
```

## Exercise 2: Python

Finally, using Seaborn.

```{python seaborn-rides}
rides = r.daily_rides
sns.relplot(x = "date", y = "total", kind = "line", data = rides);
plt.xlabel("Date")
plt.ylabel("Total number of rides")
plt.show()
```



